<view class="container">
  <view class="tabs">
    <view class="tab-item {{currentTab == 0 ? 'active' : ''}}" bindtap="switchTab" data-index="0">全部</view>
    <view class="tab-item {{currentTab == 1 ? 'active' : ''}}" bindtap="switchTab" data-index="1">待付款</view>
    <view class="tab-item {{currentTab == 2 ? 'active' : ''}}" bindtap="switchTab" data-index="2">待发货</view>
    <view class="tab-item {{currentTab == 3 ? 'active' : ''}}" bindtap="switchTab" data-index="3">待收货</view>
    <view class="tab-item {{currentTab == 4 ? 'active' : ''}}" bindtap="switchTab" data-index="4">已完成</view>
  </view>

  <scroll-view scroll-y class="order-list">
    <view class="order-item" wx:for="{{orderList}}" wx:key="id">
      <view class="order-header">
        <text class="order-no">订单号：{{item.orderNo}}</text>
        <text class="order-status">{{item.statusText}}</text>
      </view>
      
      <view class="goods-list">
        <view class="goods-item" wx:for="{{item.goodsList}}" wx:key="id" wx:for-item="goods">
          <image class="goods-img" src="{{goods.image}}" mode="aspectFill"/>
          <view class="goods-info">
            <view class="goods-name">{{goods.name}}</view>
            <view class="goods-specs">{{goods.specs}}</view>
            <view class="goods-price-wrap">
              <text class="goods-price">¥{{goods.price}}</text>
              <text class="goods-count">x{{goods.count}}</text>
            </view>
          </view>
        </view>
      </view>

      <view class="order-footer">
        <view class="total-wrap">
          <text>共{{item.totalCount}}件商品</text>
          <text>合计：</text>
          <text class="total-price">¥{{item.totalPrice}}</text>
        </view>
        <view class="btn-group">
          <button class="btn" wx:if="{{item.status === 1}}" bindtap="cancelOrder" data-id="{{item.id}}">取消订单</button>
          <button class="btn primary" wx:if="{{item.status === 1}}" bindtap="payOrder" data-id="{{item.id}}">立即付款</button>
          <button class="btn primary" wx:if="{{item.status === 3}}" bindtap="confirmReceive" data-id="{{item.id}}">确认收货</button>
        </view>
      </view>
    </view>

    <view class="empty" wx:if="{{orderList.length === 0}}">
      <image class="empty-icon" src="/assets/images/empty-order.png"/>
      <text class="empty-text">暂无相关订单</text>
    </view>
  </scroll-view>
</view> 