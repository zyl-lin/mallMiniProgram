<view class="container">
  <!-- 加载中状态 -->
  <view class="loading" wx:if="{{loading}}">
    <text>加载中...</text>
  </view>

  <!-- 空购物车状态 -->
  <view class="empty-cart" wx:elif="{{!cartList.length}}">
    <image src="/assets/images/empty-cart.png" mode="aspectFit"/>
    <text>购物车还是空的</text>
    <button class="go-shopping" bindtap="goShopping">去逛逛</button>
  </view>
  
  <!-- 购物车列表 -->
  <view class="cart-list" wx:else>
    <view class="cart-item" wx:for="{{cartList}}" wx:key="id">
      <view class="checkbox" bindtap="selectGoods" data-id="{{item.id}}">
        <image src="/assets/images/{{item.selected ? 'checked.png' : 'unchecked.png'}}" mode="aspectFit"/>
      </view>
      <image class="goods-img" src="{{item.image_url}}" mode="aspectFill"/>
      <view class="goods-info">
        <view class="goods-name">{{item.name}}</view>
        <view class="goods-price">¥{{item.price}}</view>
        <view class="quantity-wrapper">
          <view class="quantity-btn" bindtap="updateQuantity" data-id="{{item.id}}" data-quantity="{{item.quantity - 1}}">-</view>
          <text class="quantity">{{item.quantity}}</text>
          <view class="quantity-btn" bindtap="updateQuantity" data-id="{{item.id}}" data-quantity="{{item.quantity + 1}}">+</view>
        </view>
      </view>
      <view class="delete-btn" bindtap="deleteGoods" data-id="{{item.id}}">
        <image src="/assets/images/delete.png" mode="aspectFit"/>
      </view>
    </view>
  </view>

  <view class="footer" wx:if="{{cartList.length}}">
    <view class="select-all" bindtap="selectAll">
      <image src="/assets/images/{{selectedAll ? 'checked.png' : 'unchecked.png'}}" mode="aspectFit"/>
      <text>全选</text>
    </view>
    <view class="total-wrapper">
      <text class="total-label">合计:</text>
      <text class="total-price">¥{{totalPrice}}</text>
    </view>
    <view class="settlement-btn" bindtap="settlement">结算</view>
  </view>
</view> 